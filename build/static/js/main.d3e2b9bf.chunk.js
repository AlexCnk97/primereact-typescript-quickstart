(this["webpackJsonpprimereact-typescript-quickstart"]=this["webpackJsonpprimereact-typescript-quickstart"]||[]).push([[0],{120:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(14),o=t.n(r),c=(t(60),t(3)),i=t(24),s=t(4),d=(t(20),t(21),t(22),t(17),t(18),t(41)),u=t(42),m=t(15),p=function(e){var a=e.onHandleLogin,t=Object(n.useState)(""),r=Object(c.a)(t,2),o=r[0],i=r[1],p=Object(n.useState)(""),v=Object(c.a)(p,2),f=v[0],h=v[1],b=Object(s.f)(),g=l.a.createElement("img",{alt:"Card",src:"https://womancart.in/images/login-img-n.svg"}),E=l.a.createElement("span",{className:""},l.a.createElement(u.Button,{onClick:function(){console.log("hey");"Admin"==o&&"CLOBI2021"==f&&(a(!0),setTimeout((function(){b.push("/dashboard")}),500))},label:"Entrar",icon:"pi pi-sign-in"}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null),l.a.createElement("div",{className:"main"},l.a.createElement("div",{className:"p-grid"},l.a.createElement("div",{className:"p-col-12"},l.a.createElement(d.Card,{title:"Iniciar Sesion",style:{width:"25em"},footer:E,header:g},l.a.createElement("div",{className:"p-grid p-d-flex p-jc-center p-ai-center p-flex-column"},l.a.createElement("div",{className:"p-col-12"},l.a.createElement("span",{className:"p-input-icon-left"},l.a.createElement(m.InputText,{value:o,onChange:function(e){return i(e.currentTarget.value)},placeholder:"Usuario"}))),l.a.createElement("div",{className:"p-col-12"},l.a.createElement("span",{className:"p-input-icon-left"},l.a.createElement(m.InputText,{value:f,onChange:function(e){return h(e.currentTarget.value)},placeholder:"Contrase\xf1a"})))))))))},v=t(9),f=t.n(v),h=t(11),b=function(e){var a=e.title;return l.a.createElement("div",{className:"p-grid"},l.a.createElement("div",{className:"p-col-6 p-d-flex p-jc-start p-ai-center"},l.a.createElement("span",null,a)),l.a.createElement("div",{className:"p-col-6 p-d-flex p-jc-end p-ai-center"},l.a.createElement("img",{style:{height:45},src:"https://clobi.online/img/Clobi_Logo.png",alt:"clobi_logo"})))},g=t(46),E=t(47),O=[{name:"Hoy",value:[new Date(Date.now())]},{name:"\xdaltimos 7 d\xedas",value:[new Date(Date.now()-6048e5),new Date(Date.now())]},{name:"\xdaltimos 15 d\xedas",value:[new Date(Date.now()-1296e6),new Date(Date.now())]},{name:"Hace un mes",value:[new Date(Date.now()-26784e5),new Date(Date.now())]}],j=function(e){var a=e.handleDateChange,t=Object(n.useState)(),r=Object(c.a)(t,2),o=r[0],i=r[1],s=Object(n.useState)(),d=Object(c.a)(s,2),u=d[0],m=d[1],p=Object(n.useState)(!1),v=Object(c.a)(p,2),f=v[0],h=v[1],b=Object(n.useRef)(null),j=function(e,t){e?0==t?(h(!1),i(e),m(void 0),a(e)):(h(!0),m(e),i(e.value),a(e.value)):(m(void 0),h(!1))};return l.a.createElement("div",{className:"p-grid"},l.a.createElement("div",{className:"p-col-12 dateparam"},l.a.createElement(g.Calendar,{ref:b,keepInvalid:!0,value:o,onChange:function(e){return j(e.value,0)},showIcon:!0,placeholder:"Rango de fecha",selectionMode:"range",disabled:f}),l.a.createElement(E.SelectButton,{value:u,options:O,onChange:function(e){return j(e.value,1)},optionLabel:"name"})))},w=t(48),y=t(12),C=t(49),N=(t(96),t(16)),x=t.n(N),D=function(e){var a=e.params,t=Object(n.useState)([{fecha:new Date,nombre:"",precio:0,precio_oferta:0,totalrows:10,unidades_vendidas:0,url:"",valor_venta:0}]),r=Object(c.a)(t,2),o=r[0],i=r[1],s=Object(n.useState)(""),d=Object(c.a)(s,2),u=(d[0],d[1],Object(n.useState)(0)),p=Object(c.a)(u,2),v=p[0],b=p[1],g=Object(n.useState)(10),E=Object(c.a)(g,2),O=E[0],j=E[1],N=Object(n.useState)(10),D=Object(c.a)(N,2),S=D[0],k=D[1],_=function(){var e=Object(h.a)(f.a.mark((function e(t){var n,l,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length>1&&void 0!==r[1]?r[1]:10,l=r.length>2&&void 0!==r[2]?r[2]:1,x.a.get("http://18.223.186.183:8000/api/dashboard/productos-vendidos?dateparam1=".concat(a.param1,"&dateparam2=").concat(a.param2,"&searchbox=").concat(t,"&limit=").concat(n,"&offset=").concat(l)).then((function(e){e.data.data&&i(e.data.data),k(e.data.data[0].totalrows)})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){_("")}),[a]);var T=l.a.createElement("div",{className:"table-header"},"Productos vendidos",l.a.createElement(m.InputText,{placeholder:"Buscar producto",onChange:function(e){_(e.target.value)}})),M=l.a.createElement(C.Paginator,{first:v,rows:O,totalRecords:S,rowsPerPageOptions:[10,20,30],onPageChange:function(e){b(e.first),_("",e.rows,e.page+1),j(e.rows)}});return l.a.createElement("div",{className:"p-grid"},l.a.createElement("div",{className:"p-col-12"},l.a.createElement("div",{className:"datatable-responsive-demo"},l.a.createElement("div",{className:"card"},l.a.createElement(w.DataTable,{value:o,loading:!o,header:T,footer:M,resizableColumns:!0,columnResizeMode:"fit",className:"p-datatable-responsive-demo"},l.a.createElement(y.Column,{field:"nombre",body:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement("a",{href:e.url,target:"_blank"},e.nombre)))},header:"Nombre de producto",style:{width:"60%"}}),l.a.createElement(y.Column,{field:"precio",header:"Precio de producto",style:{width:"10%"}}),l.a.createElement(y.Column,{field:"precio_oferta",header:"Precio oferta",style:{width:"10%"}}),l.a.createElement(y.Column,{field:"unidades_vendidas",header:"Unidades vendidas",style:{width:"10%"}}),l.a.createElement(y.Column,{field:"valor_venta",header:"Valor de venta",style:{width:"10%"}}))))))},S=t(50),k=t(51),_=function(){function e(){Object(S.a)(this,e)}return Object(k.a)(e,null,[{key:"getDashboardChart",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"null",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"null";return new Promise((function(n,l){x.a.get("http://18.223.186.183:8000/api/dashboard/".concat(e,"?dateparam1=").concat(a,"&dateparam2=").concat(t)).then((function(e){e.data.data&&(console.log(e.data.data),n(e.data.data))})).catch((function(e){l(e)}))}))}},{key:"getDashboardTable",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"null",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"null",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"10",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"1";return new Promise((function(o,c){x.a.get("http://18.223.186.183:8000/api/dashboard/".concat(e,"?dateparam1=").concat(a,"&dateparam2=").concat(t,"&searchbox=").concat(n,"&limit=").concat(l,"&offset=").concat(r)).then((function(e){e.data.data&&(console.log(e.data.data),o(e.data.data))})).catch((function(e){c(e)}))}))}}]),e}(),T=t(52),M=function(e){var a=e.type,t=e.labels,n={label:e.title,data:t.y,fill:!1};"line"==a?n.borderColor="#7A16BD":n.backgroundColor="#7A16BD";var r={labels:t.x,datasets:[n]},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a={legend:{labels:{fontColor:"#495057"}},scales:{xAxes:[{ticks:{callback:function(a){if(a)return 0==e?a.substr(0,15)+"...":a}}}],yAxes:[{ticks:{fontColor:"#495057",callback:function(e){if(e)return e/1e3+" k"}}}]}},t={responsive:!0,hoverMode:"index",stacked:!1,scales:{xAxes:[{ticks:{fontColor:"#495057"},gridLines:{color:"#ebedef"}}],yAxes:[{type:"linear",display:!0,position:"left",id:"y-axis-1",ticks:{fontColor:"#495057"},gridLines:{color:"#ebedef"}},{type:"linear",display:!0,position:"right",id:"y-axis-2",ticks:{fontColor:"#495057"},gridLines:{drawOnChartArea:!1,color:"#ebedef"}}]},legend:{labels:{fontColor:"#495057"}}};return{basicOptions:a,multiAxisOptions:t}}().basicOptions;return l.a.createElement("div",{className:"p-grid"},l.a.createElement("div",{className:"p-col-12"},l.a.createElement(T.Chart,{type:a,data:r,options:o})))},P=t(53),I=function(){var e=Object(n.useState)(10),a=Object(c.a)(e,2),t=(a[0],a[1]),r=Object(n.useState)(),o=Object(c.a)(r,2),i=o[0],s=o[1],d=Object(n.useState)(),u=Object(c.a)(d,2),m=u[0],p=u[1],v=Object(n.useState)(),g=Object(c.a)(v,2),E=g[0],O=g[1],w=Object(n.useState)(),y=Object(c.a)(w,2),C=y[0],N=y[1],x=Object(n.useState)([{fecha:new Date,nombre:"",precio:0,precio_oferta:0,totalrows:10,unidades_vendidas:0,url:"",valor_venta:0}]),S=Object(c.a)(x,2),k=(S[0],S[1]),T=Object(n.useState)({param1:"null",param2:"null"}),I=Object(c.a)(T,2),A=I[0],L=I[1],B=function(){var e=Object(h.a)(f.a.mark((function e(){var a,n,l,r,o,c,i,d,u=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=u.length>0&&void 0!==u[0]?u[0]:"null",n=u.length>1&&void 0!==u[1]?u[1]:"null",l=[],r=_.getDashboardChart("productos-mas-vendidos",a,n),o=_.getDashboardChart("productos-mayor-margen",a,n),c=_.getDashboardChart("ventas-depto",a,n),i=_.getDashboardChart("ventas-diarias",a,n),d=_.getDashboardTable("productos-vendidos",a,n),l.push(r),l.push(o),l.push(c),l.push(i),l.push(d),Promise.all(l).then((function(e){s(e[0]),p(e[1]),O(e[2]),N(e[3]),k(e[4]),e[4][0]&&t(e[4][0].totalrows)}));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(e){if(e){var a=e[0].toISOString().split("T")[0],t=e[1]?e[1].toISOString().split("T")[0]:(new Date).toISOString().split("T")[0];console.log(a,t),B(a,t),L({param1:a,param2:t})}};return Object(n.useEffect)((function(){B()}),[]),l.a.createElement("div",{className:"main"},l.a.createElement("div",{className:"container"},l.a.createElement(b,{title:"Ventas"}),C&&C.length>0?l.a.createElement("div",null,l.a.createElement(j,{handleDateChange:H}),l.a.createElement("div",{className:"p-grid"},l.a.createElement("div",{className:"p-col-12"},l.a.createElement(M,{labels:{x:null===C||void 0===C?void 0:C.flatMap((function(e){return e.fecha})),y:null===C||void 0===C?void 0:C.flatMap((function(e){return e.total_ventas}))},title:"Total de ventas",type:"line"}))),l.a.createElement("div",{className:"p-grid"},l.a.createElement("div",{className:"p-col-12"},l.a.createElement(M,{labels:{x:null===E||void 0===E?void 0:E.flatMap((function(e){return e.departamento})),y:null===E||void 0===E?void 0:E.flatMap((function(e){return e.total_ventas}))},title:"Ventas por departamento",type:"bar"}))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"p-grid"},l.a.createElement("div",{className:"p-col-6"},l.a.createElement(M,{labels:{x:null===i||void 0===i?void 0:i.flatMap((function(e){return e.product_name})),y:null===i||void 0===i?void 0:i.flatMap((function(e){return e.total_unidades_vendidas}))},title:"Productos mas vendidos",type:"bar"})),l.a.createElement("div",{className:"p-col-6"},l.a.createElement(M,{labels:{x:null===m||void 0===m?void 0:m.flatMap((function(e){return e.product_name})),y:null===m||void 0===m?void 0:m.flatMap((function(e){return e.total_ventas}))},title:"Productos con mayor margen",type:"bar"}))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(D,{params:A})):l.a.createElement("div",{className:"p-d-flex p-jc-center p-ai-center p-flex-column"},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(j,{handleDateChange:H}),l.a.createElement("br",null),l.a.createElement(P.Message,{severity:"info",text:"No se encontro ningun dato para ser procesado en esta fecha. "}))))},A=function(){var e=Object(n.useState)(!1),a=Object(c.a)(e,2),t=a[0],r=a[1],o=function(e){r(e)};return l.a.createElement(i.a,null,l.a.createElement(s.c,null,l.a.createElement(s.a,{path:"/login"},l.a.createElement(p,{onHandleLogin:o})),l.a.createElement(s.a,{path:"/dashboard"},l.a.createElement(I,null)),l.a.createElement(s.a,{path:"/"},t?l.a.createElement(I,null):l.a.createElement(p,{onHandleLogin:o}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},18:function(e,a,t){},55:function(e,a,t){e.exports=t(120)},60:function(e,a,t){},96:function(e,a,t){}},[[55,1,2]]]);
//# sourceMappingURL=main.d3e2b9bf.chunk.js.map